<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Spotify NP Script (Local Edition) v1.5</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: sans-serif; line-height: 1.6; max-width: 800px; margin: auto; padding: 1rem; }
    nav a { margin-right: 1rem; color: #0366d6; text-decoration: none; }
    pre { background: #f6f8fa; padding: 1rem; overflow-x: auto; }
    code { background: #f6f8fa; padding: 0.2rem 0.4rem; }
  </style>
</head>
<body>
  <header>
    <h1>Spotify NP Script (Local Edition) v1.5</h1>
    <p><strong>Maker:</strong> blind_peer</p>
    <p>A purely local “Now Playing” bookmarklet for chat clients—secure PKCE OAuth, auto‐refresh tokens, no external servers.</p>
  </header>

  <nav>
    <a href="#features">Features</a>
    <a href="#install">Install</a>
    <a href="#usage">Usage</a>
    <a href="#files">Files</a>
  </nav>

  <section id="features">
    <h2>Features</h2>
    <ul>
      <li>One‐click “Now Playing” via bookmarklet</li>
      <li>Secure PKCE flow (no secret in JS)</li>
      <li>Local Flask proxy for token/refresh</li>
      <li>Auto‐refresh tokens (no hourly popups)</li>
      <li>Chat message: <code>/me is now playing: Artist – Track [Album] (Link)</code></li>
    </ul>
  </section>

  <section id="install">
    <h2>Installation</h2>
    <ol>
      <li>Clone this repo.</li>
      <li>Run <code>Install_SpotifyNPScript-Local.bat</code> and enter your Spotify Client ID.</li>
      <li>Register redirect URI in Spotify Dashboard:<br>
          <code>http://127.0.0.1:8000/index.html</code>
      </li>
      <li>Copy your bookmarklet from <code>bookmarklet.txt</code> into a new browser favorite.</li>
    </ol>
  </section>

  <section id="usage">
    <h2>Usage</h2>
    <ol>
      <li>Ensure servers are running (<code>run-all-servers.bat</code>).</li>
      <li>Click the bookmarklet on any page with <code>cb().say</code>.</li>
      <li>Authorize the app on first run.</li>
      <li>Chat post appears: <code>/me is now playing: …</code></li>
    </ol>
  </section>

  <section id="files">
    <h2>Core Files</h2>
    <ul>
      <li><code>index.html</code> – landing page (this file)</li>
      <li><code>proxy.py</code> – Flask token/refresh proxy</li>
      <li><code>run-proxy-py.bat</code> – launches the proxy</li>
      <li><code>run-all-servers.bat</code> – starts both servers</li>
      <li><code>bookmarklet.txt</code> – your one‐line bookmarklet</li>
    </ul>
  </section>

  <footer>
    <p>© 2025 blind_peer • MIT License</p>
  </footer>
</body>
</html>